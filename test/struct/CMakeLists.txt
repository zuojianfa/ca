set(test_case_seq 1)
do_testf(struct "struct_print1.ca.result" "struct_print1.ca.result.tmp" ca struct_print1.ca struct_print1.ca.result.tmp)
#do_testf(struct "struct_print2.ca.result" "struct_print2.ca.result.tmp" ca struct_print2.ca struct_print2.ca.result.tmp)
do_testf(struct "struct_print3.ca.result" "struct_print3.ca.result.tmp" ca struct_print3.ca struct_print3.ca.result.tmp)
do_testf(struct "struct_print4.ca.result" "struct_print4.ca.result.tmp" ca struct_print4.ca struct_print4.ca.result.tmp)
do_testf(struct "struct_print5.ca.result" "struct_print5.ca.result.tmp" ca struct_print5.ca struct_print5.ca.result.tmp)
do_test(struct "AA { n1: 111, n2: 222, n3: 333 }\n111 222 333 \nA2 { a: 32, b: 64, c: 32, d: 32.220001, e: 64.640000, f: 1, g: A, h: 3 }\nA4 { aa: 88, b: 0x32, c: 0x3232, d: 0x123453232, h: 0x123453232 }\nA4 { aa: 88, b: 0x32, c: 0x3232, d: 0x123453232, h: 0x133453232 }\n0x3232" ca struct_field1.ca)
do_test(struct "AA { n1: 111, n2: 222, n3: 333 }\n111 222 333 \nA2 { a: 32, b: 64, c: 32, d: 32.220001, e: 64.640000, f: 1, g: A, h: 3 }\nA2 { a: 32, b: 64, c: 32, d: 32.220001, e: 160.639999, f: 1, g: A, h: 3 }\nA4 { aa: 88, b: 0x32, c: 0x3232, d: 0x123453232, h: 0x123453232 }\nA4 { aa: 88, b: 0x32, c: 0x3232, d: 0x123453232, h: 0x133453232 }\n0x3232\n" ca struct_field2.ca)
do_test(struct "AA { nn1: 33, nn2: 0 }\nA1 { bbb: AA { nn1: 33, nn2: 0 }, aaa: 34 }\nA2 { bbb: A1 { bbb: AA { nn1: 33, nn2: 0 }, aaa: 34 }, aab: 3.141593 }\nA3 { cca: A2 { bbb: A1 { bbb: AA { nn1: 33, nn2: 0 }, aaa: 34 }, aab: 3.141593 }, def: 9394.555664 }\n" ca struct_field3.ca)
do_test(struct "AA { n1: 33 }\nA1 { a: AA { n1: 33 } }\n\n33\nAA { n1: 33 }\nA1 { a: AA { n1: 33 } }\n33\nAA { n1: 33 }\nA1 { a: AA { n1: 33 } }\n" ca struct_field4.ca)
do_test(struct "A1 { a: AA { n1: 33 } }\nA1 { a: AA { n1: 66 } }\n132\nA1 { a: AA { n1: 133 } }\nA1 { a: AA { n1: 3 } }\nAA { n1: 33 }\n" ca struct_field5.ca)
do_test(struct "A1 { a: AA { n1: 33 } }\nA1 { a: AA { n1: 66 } }\n132\nA1 { a: AA { n1: 133 } }\nA1 { a: AA { n1: 3 } }\nAA { n1: 33 }\n" ca struct_field6.ca)
do_test(struct "A1 { a: AA { n1: 33 } }\nAA { n1: 4326 }\nA1 { a: AA { n1: 4326 } }\nA2 { b: \\(nil\\) }\nA2 { b: 0x1234567890 }\nAA { n1: 4326 }\nAA { n1: 4326 }\nAA { n1: 4326 }\nAA { n1: 65536 }\n65536 1 336 672" ca struct_field7.ca)
do_test(struct "AA { aa_f1: 332 }\nA1 { a1_f1: AA { aa_f1: 332 }, a1_f2: 789 }\nA2 { a2_f1: 3.141593, a2_f2: 0xf32dbcaa }\nA3 { a3_f1: A2 { a2_f1: 3.141593, a2_f2: 0xf32dbcaa }, a3_f2: 1 }\nA3 { a3_f1: A2 { a2_f1: 3.141593, a2_f2: 0x32dfbcaa }, a3_f2: 1 }\nA4 { a4_f1: C, a4_f2: A3 { a3_f1: A2 { a2_f1: 3.141593, a2_f2: 0xf32dbcaa }, a3_f2: 1 } }\nA1 { a1_f1: AA { aa_f1: 332 }, a1_f2: 789 }\n2147483647\n\n" ca struct_field8.ca)
do_test(struct "AA { aa_f1: 332, aa_f2: \\[1, 0, 0, 1, 0, 1\\] }\nA1 { a1_f1: 432.234009, a1_f2: AA { aa_f1: 332, aa_f2: \\[1, 0, 0, 1, 0, 1\\] } }\nA1 { a1_f1: 116.611000, a1_f2: AA { aa_f1: 276, aa_f2: \\[1, 1, 1, 1, 0, 1\\] } }\nA2 { arr: \\[\\[AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }, AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\\], \\[AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }, AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\\]\\] }\n\\[\\[AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }, AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\\], \\[AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }, AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\\]\\]\n\\[AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }, AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\\]\nAA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\nAA { aa_f1: 9732, aa_f2: \\[0, 0, 1, 1, 0, 0\\] }\nAA { aa_f1: 2379, aa_f2: \\[0, 0, 0, 1, 1, 0\\] }\nAA { aa_f1: 39, aa_f2: \\[0, 1, 0, 1, 0, 0\\] }\nA2 { arr: \\[\\[AA { aa_f1: 9732, aa_f2: \\[0, 0, 1, 1, 0, 0\\] }, AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\\], \\[AA { aa_f1: 2379, aa_f2: \\[0, 0, 0, 1, 1, 0\\] }, AA { aa_f1: 39, aa_f2: \\[0, 1, 0, 1, 0, 0\\] }\\]\\] }\nAA { aa_f1: 39, aa_f2: \\[0, 1, 0, 1, 0, 0\\] }\n\\[1, 0, 1\\]\n0 1 \n\\[\\[0, 1\\], \\[1, 0\\]\\]\n1 0  9732 222 222\n" ca struct_array1.ca)
do_test(struct "AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\n1000\nAA { aa_f1: 1000, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\n\\[0, 0, 0, 0, 0, 0\\]\n\\[1, 0, 0, 1, 0, 0\\]\nAA { aa_f1: 1000, aa_f2: \\[1, 0, 0, 1, 0, 0\\] }\n321\n\\[1, 1, 1, 1, 0, 0\\]\n3274 3275\nA2 { arr: \\[\\[AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }, AA { aa_f1: 3275, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\\], \\[AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }, AA { aa_f1: 0, aa_f2: \\[0, 0, 0, 0, 0, 0\\] }\\]\\] }" ca struct_array2.ca)
do_test(struct "AA { f1: 4886718345, f2: 3.141593, f3: 1 }\nAA { f1: 4886718345, f2: 3.141593, f3: 1 }\nA1 { f1: AA { f1: 4886718345, f2: 3.141593, f3: 1 }, f2: C }\nA1 { f1: AA { f1: 100, f2: 6.283185, f3: 0 }, f2: C }" ca struct_value1.ca)
do_test(struct "AP { f1: 0x7f0879249000 }\nAI { f1: \\[1, 2, 3\\] }\nAA { f1: \\[234, 567, 890\\], f2: 0x7f4f972c404e }\nA1 { f1: AA { f1: \\[234, 567, 890\\], f2: 0x7f4f972c404e }, f2: \\[H, e, l, l, o,  , C, A, !\\] }\nA1 { f1: AA { f1: \\[100, 200, 300\\], f2: 0x7f4f972c404e }, f2: \\[H, e, l, l, o,  , C, A, !\\] }\nAA { f1: \\[100, 200, 300\\], f2: 0x7f4f972c404e }\n\\[100, 200, 300\\]\n300\n" ca struct_value2.ca)
do_test(struct "AA { f1: 4886718345, f2: 3.141593, f3: 1 }\nAA { f1: 4886718345, f2: 3.141593, f3: 1 }\nAA { f1: 4886718345, f2: 3.141593, f3: 1 }\nAA { f1: 4886718345, f2: 3.141593, f3: 1 }\nAA { f1: 4886718345, f2: 3.141593, f3: 1 }\nAA { f1: 4886718345, f2: 3.141593, f3: 1 }\nA1 { f1: AA { f1: 4886718345, f2: 3.141593, f3: 1 }, f2: C }\nA1 { f1: AA { f1: 100, f2: 6.283185, f3: 0 }, f2: C }\nA1 { f1: AA { f1: 4886718345, f2: 3.141593, f3: 1 }, f2: C }\nA1 { f1: AA { f1: 101, f2: 6.283185, f3: 0 }, f2: C }\n" ca struct_value3.ca)
do_test(struct "AP { f1: 0x7f0879249000 }\nAP { f1: 0x7f0879249000 }\nAI { f1: \\[1, 2, 3\\] }\nAI { f1: \\[1, 2, 3\\] }\nAA { f1: \\[234, 567, 890\\], f2: 0x7f4f972c404e }\nAA { f1: \\[234, 567, 890\\], f2: 0x7f4f972c404e }\nAA { f1: \\[234, 567, 890\\], f2: 0x7f4f972c404e }\nA1 { f1: AA { f1: \\[234, 567, 890\\], f2: 0x7f4f972c404e }, f2: \\[H, e, l, l, o,  , C, A, !\\] }\nA1 { f1: AA { f1: \\[100, 200, 300\\], f2: 0x7f4f972c404e }, f2: \\[H, e, l, l, o,  , C, A, !\\] }\nAA { f1: \\[100, 200, 300\\], f2: 0x7f4f972c404e }\n\\[100, 200, 300\\]\n300\nA1 { f1: AA { f1: \\[234, 567, 890\\], f2: 0x7f4f972c404e }, f2: \\[H, e, l, l, o,  , C, A, !\\] }\nA1 { f1: AA { f1: \\[234, 567, 890\\], f2: 0x7f4f972c404e }, f2: \\[H, e, l, l, o,  , C, A, !\\] }" ca struct_value4.ca)
do_test(struct "line: 8, col: 72: struct type `{AA\\;f1:i64,f2:f64,f3:bool}` expression field size: `3` not equal to the struct field size: `4`" ca struct_error1.ca)
do_test(struct "line: 8, col: 51: struct type `{AA\\;f1:i64,f2:f64,f3:bool}` expression field size: `3` not equal to the struct field size: `2`" ca struct_error2.ca)
do_test(struct "line: 8, col: 56:.*the field `2`'s type `bool` of struct expression is different from the struct definition: `f64`" ca struct_error3.ca)
do_test(struct "line: 8, col: 66:.*multiple expression specified for field `t:bool` in struct `AA`" ca struct_error4.ca)
do_test(struct "line: 14, col: 25:.*struct type `{A1;f1:{AA;f1:i64,f2:f64,f3:bool},f2:i8}` expression field size: `2` not equal to the struct field size: `1`" ca struct_error5.ca)
do_test(struct "line: 14, col: 34:.*multiple expression specified for field `t:i8` in struct `A1`" ca struct_error6.ca)
do_test(struct "AA { f1: 32 }\nA1 { f1: 44.300000 }\nA2 { f1: 32, f2: 44.300000 }\nA3 { f2: 44.300000, f1: 32 }" ca struct_one1.ca)
do_test(struct "AA { f1: 32, f2: 44.300000, f3: C }\nA1 { f2: 44.300000, f1: 32, f3: D }\nA2 { aa: AA { f1: 32, f2: 44.300000, f3: C }, a1: A1 { f2: 44.300000, f1: 32, f3: D } }\nA3 { aa: AA { f1: 32, f2: 44.300000, f3: C }, a1: A1 { f2: 44.300000, f1: 32, f3: D }, c1: C1 { f1: B } }\nC1 { f1: A }\nA21 { c1: E, aa: AA { f1: 0, f2: 0.000000, f3: H }, a1: A1 { f2: 0.000000, f1: 0, f3: I } }\nA22 { aa: AA { f1: 0, f2: 0.000000, f3: J }, a1: A1 { f2: 0.000000, f1: 0, f3: K }, c1: F }\n24 16 40 48 1" ca struct_one2.ca)
do_testf(struct "struct_one1.ca.ll" "struct_one1.ca.ll.tmp" ca -g -ll struct_one1.ca struct_one1.ca.ll.tmp)
do_testf(struct "struct_one2.ca.ll" "struct_one2.ca.ll.tmp" ca -g -ll struct_one2.ca struct_one2.ca.ll.tmp)
do_test(struct "AA { aa_f1: 321, aa_f2: \\[1, 2, 3\\] }\nA1 { a1_f1: 3.141590, a1_f2: AA { aa_f1: 321, aa_f2: \\[1, 2, 3\\] } }\nA2 { arr: \\[\\[AA { aa_f1: 321, aa_f2: \\[1, 2, 3\\] }, AA { aa_f1: 321, aa_f2: \\[1, 2, 3\\] }\\], \\[AA { aa_f1: 321, aa_f2: \\[1, 2, 3\\] }, AA { aa_f1: 321, aa_f2: \\[1, 2, 3\\] }\\]\\] }\n" ca struct_array3.ca)
do_testf(struct "struct_array1.ca.ll" "struct_array1.ca.ll.tmp" ca -g -ll struct_array1.ca struct_array1.ca.ll.tmp)
do_testf(struct "struct_array2.ca.ll" "struct_array2.ca.ll.tmp" ca -g -ll struct_array2.ca struct_array2.ca.ll.tmp)
do_testf(struct "struct_array3.ca.ll" "struct_array3.ca.ll.tmp" ca -g -ll struct_array3.ca struct_array3.ca.ll.tmp)
do_testf(struct "struct_array_s1.ca.ll" "struct_array_s1.ca.ll.tmp" ca -g -ll struct_array_s1.ca struct_array_s1.ca.ll.tmp)
do_test(struct "1103103370\nAA { f1: 1104199399 }" ca struct_expr.ca)
do_test(struct "AA { a1: 32, a2: 1 }" ca multilevel_field.ca)
do_test(struct "good" ca field_ignore.ca)

